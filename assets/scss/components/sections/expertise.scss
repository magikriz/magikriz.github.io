  @keyframes fadeIn {
    from { opacity: 0;}
    to { opacity: 1; }
  }


// Theme Variables
$fire-color: #ff6b6b;
$ice-color: #6bc5ff;
$light-fire: #ff9e9e;
$light-ice: #a8ddff;
$bg-fire: #2c1f1f;
$bg-ice: #1f2c2c;
$text-light: #f5f5f5;
$text-dark: #2a2a2a;
$box-shadow-fire: 0 0 15px rgba(255, 107, 107, 0.7);
$box-shadow-ice: 0 0 15px rgba(107, 197, 255, 0.7);
$transition: all 0.4s ease;

@mixin themed-border($theme) {
  border: 2px solid if($theme == fire, $fire-color, $ice-color);
  box-shadow: if($theme == fire, $box-shadow-fire, $box-shadow-ice);
}

@mixin hexagon-shape {
  clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
}

.kd-expertise {
  background-color: var(--expertise-background-color);  
  // background: var(--expertise-background-webkit);
  // background: var(--expertise-background-moz);
  // background: var(--expertise-background-linear);
  background-image: var(--expertise-background-linear), var(--expertise-bg-image);  
  background-size: 210rem 140rem;
  background-position: center;
  background-repeat: no-repeat;
  animation: backgroundAnimation 400s linear infinite;

  @media screen and (orientation: portrait) {
    background-size: cover;    
  }
}

@keyframes backgroundAnimation {
  0% {
    background-position: 50% 50%; /* Initial position */
  }
  12.5% {
    background-position: 100% 0%; /* Full movement */
  }
  25% {
    background-position: 50% 50%; /* Full movement */
  }
  37.5% {
    background-position: 0% 100%; /* Full movement */
  }
  50% {
    background-position: 50% 50%; /* Full movement */
  }
  62.5% {
    background-position: 100% 100%; /* Full movement */
  }
  75% {
    background-position: 50% 50%; /* Full movement */
  }
  87.5% {
    background-position: 0% 0%; /* Full movement */
  }
  100% {
    background-position: 50% 50%; /* Full movement */
  }
}

.expertise-container {
  display: flex;
  flex-direction: row;
  justify-content: space-around;
  align-items: center;
  padding: 0 2rem;
  width: 100%;
  height: calc(100% - 4rem);
  position: relative;
  margin: 2rem 0;
  overflow: hidden;
  
  @media (orientation: portrait) {
    flex-direction: column;
    justify-content: flex-start;
  }
}

.skillhive-wrapper,
.hive-expansion-wrapper {
  display: flex;
  // flex: 1;
  align-items: center;
  justify-content: center;
  position: relative;
  margin: 0;
  height: 100%;
  width: auto;
}

.skillhive-wrapper {
  width: 55rem;
  padding: 0 2rem 2rem 2rem;
    
  @media (orientation: portrait) {
    width: 100%;
    height: 50rem;
  }
}

.hive-expansion-wrapper {
  width: clamp(30%,50%,calc(100% - 55rem));
  min-width: 30%;
  height: 100%;
  padding: 0 2rem 2rem 2rem;
  opacity: 0;

  animation: panelWrapFade 1.1s ease forwards;
  animation-delay: 0.5s;
  
  @media (orientation: portrait) {
    width: 100%;
    height: clamp(30%,40%,calc(100% - 50rem));
    min-height: 30%;
  }
}

@keyframes panelWrapFade {
  0% {
    opacity: 0;
    filter: blur(1rem);
  }
  100% {
    opacity: 1;
    filter: blur(0);
  }
}

.skillhive {
  position: relative;
}


@for $i from 1 through 7 {
  .skillhive-leaf:nth-child(#{$i}) {
    animation-delay: #{($i - 1) * 200}ms;
  }
}

.skillhive-leaf {
  position: absolute;
  width: 15rem;
  height: calc(15rem / 0.865);

  @include hexagon-shape;
  transition: $transition;
  overflow: hidden;

  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;

  // box-shadow: 0 0 10px transparent;
  background: var(--hive-bg);
  background: var(--hex-background-radial);

  top: 50%;
  left: 50%;

  // &::before {
  //   content: "";
  //   position: absolute;
  //   top: 0;
  //   left: 0;
  //   width: 100%;
  //   height: 100%;
  //   background: radial-gradient(circle at center, rgba(255,255,255,0.001), rgba(10,10,10,0.05));
  //   z-index: -1;
  // }

  opacity: 0;
  animation: ambientPulseReveal 1.1s ease-out forwards;

  &:hover {
    &::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--hive-active-bg);
      z-index: -1;
    }
  }

  &:nth-child(1) {
    transform: translate(-50%, -50%);
    &:hover {
      transform: translate(-50%, -50%) scale(1.05);
    }
    &:active {
      transform: translate(-50%, -50%) scale(0.8);
    }
  }

  &:nth-child(2) {
    transform: translate(calc(-50% - 7.5rem - 0.4rem) , calc(-50% - calc(15rem / 0.865 * .75) - 0.4rem));
    &:hover {
      transform: translate(calc(-50% - 7.5rem - 0.4rem) , calc(-50% - calc(15rem / 0.865 * .75) - 0.4rem)) scale(1.05);
    }
    &:active {
      transform: translate(calc(-50% - 7.5rem - 0.4rem) , calc(-50% - calc(15rem / 0.865 * .75) - 0.4rem)) scale(0.8);
    }
  }

  &:nth-child(3) {
    transform: translate(calc(-50% + 7.5rem + 0.4rem) , calc(-50% - calc(15rem / 0.865 * .75) - 0.4rem));
    &:hover {
      transform: translate(calc(-50% + 7.5rem + 0.4rem) , calc(-50% - calc(15rem / 0.865 * .75) - 0.4rem)) scale(1.05);
    }
    &:active {
      transform: translate(calc(-50% + 7.5rem + 0.4rem) , calc(-50% - calc(15rem / 0.865 * .75) - 0.4rem)) scale(0.8);
    }
  }

  &:nth-child(4) {
    transform: translate(calc(-50% - 15rem - 0.4rem - 0.4rem) , calc(-50%));
    &:hover {
      transform: translate(calc(-50% - 15rem - 0.4rem - 0.4rem) , calc(-50%)) scale(1.05);
    }
    &:active {
      transform: translate(calc(-50% - 15rem - 0.4rem - 0.4rem) , calc(-50%)) scale(0.8);
    }
  }

  &:nth-child(5) {
    transform: translate(calc(-50% + 15rem + 0.4rem + 0.4rem) , calc(-50%));
    &:hover {
      transform: translate(calc(-50% + 15rem + 0.4rem + 0.4rem) , calc(-50%)) scale(1.05);
    }
    &:active {
      transform: translate(calc(-50% + 15rem + 0.4rem + 0.4rem) , calc(-50%)) scale(0.8);
    }
  }

  &:nth-child(6) {
    transform: translate(calc(-50% - 7.5rem - 0.4rem) , calc(-50% + calc(15rem / 0.865 * .75) + 0.4rem));
    &:hover {
      transform: translate(calc(-50% - 7.5rem - 0.4rem) , calc(-50% + calc(15rem / 0.865 * .75) + 0.4rem)) scale(1.05);
    }
    &:active {
      transform: translate(calc(-50% - 7.5rem - 0.4rem) , calc(-50% + calc(15rem / 0.865 * .75) + 0.4rem)) scale(0.8);
    }
  }

  &:nth-child(7) {
    transform: translate(calc(-50% + 7.5rem + 0.4rem) , calc(-50% + calc(15rem / 0.865 * .75) + 0.4rem));
    &:hover {
      transform: translate(calc(-50% + 7.5rem + 0.4rem) , calc(-50% + calc(15rem / 0.865 * .75) + 0.4rem)) scale(1.05);
    }
    &:active {
      transform: translate(calc(-50% + 7.5rem + 0.4rem) , calc(-50% + calc(15rem / 0.865 * .75) + 0.4rem)) scale(0.8);
    }
  }

  &:hover {
    // background: var(--hive-active-bg);
    color: $text-light;
    // box-shadow: var(--hive-box-shadow);

    & .skillhive-leaf-inner-icon {
      color: var(--hive-active);
    }
    
    & .skillhive-leaf-inner-title span {
      color: var(--hive-active);
    }
  }

  &.active {
    background: var(--hive-active-bg);
    color: $text-light;

    & .skillhive-leaf-inner-icon {
      color: var(--hive-active);
    }
    
    & .skillhive-leaf-inner-title span {
      color: var(--hive-active);
    }

  }
}

@keyframes ambientPulseReveal {
  0% {
    opacity: 0;
    filter: brightness(2) saturate(2);
    box-shadow: 0 0 2rem rgba(255,255,255,0.3);
  }
  50% {
    opacity: 1;
    filter:  brightness(1.2) saturate(1.2);
  }
  100% {
    opacity: 1;
    filter: brightness(1) saturate(1);
    box-shadow: none;
  }
}


.skillhive-leaf-inner {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  width: 100%;
  height: 100%;
}

.skillhive-leaf-inner-icon {
  font-size: 5rem;
  // margin-bottom: 0.8rem;
  color: var(--hexicon-color);

}

.skillhive-leaf-inner-title {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;

  span {
    font-weight: 600;
    text-align: center;
    text-transform: uppercase;
    font-size: 2rem;
    color: var(--hexicon-color);
  }
}

.hive-expansion-wrapper {
  position: relative;
  padding: 1rem;
  background: rgba(0,0,0, 0.2);
  padding: 1.5rem;
  border-radius: 1rem;
  border: 2px solid rgba(255,255,255, 0.1);
  transition: $transition;

  .hive-expansion {
    width: 100%;
    height: calc(100%);
    margin: 0;
    padding: 0.5rem;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: flex-start;
    padding: 0.5rem;
    overflow-y: auto;
    overflow-x: hidden;

    &::-webkit-scrollbar {
      width: 0.4rem;
    }
    &::-webkit-scrollbar-thumb {
      background: #666;
      border-radius: 1rem;
    }
    
    .expansion-title {
      font-size: 3.8rem;
      font-weight: 600;
      margin-bottom: 1.8rem;
      text-transform: uppercase;
      text-align: left;
      color: var(--accent-color);
    }

    .expansion-desc {
      font-size: 1.8rem;
      font-weight: 500;
      margin-bottom: 1rem;
      color: var(--text-color);
    }

    .expansion-category {
      font-size: 2.2rem;
      font-weight: 500;
      color: var(--accent-color);
      text-transform: capitalize;
    }

    .expansion-extra {
      font-size: 1.8rem;
      font-weight: 500;
      margin-bottom: 1rem;
      color: var(--text-color);
    }

    .expansion-points {
      padding-left: 2.5rem;
      margin-bottom: 1.5rem;

      span {
        padding: 0.5rem 0 0.5rem 0;
        color: var(--text-color);
        font-size: 1.8rem;
        position: relative;
        line-height: 1;
        display: block;
        text-transform: capitalize;

        &::before {
          content: '';
          position: absolute;
          display: block;
          width: 1rem;
          height: 1rem;
          left: -2.5rem;
          top: 50%;
          transform: translateY(-50%);
          border-radius: 50%;
          background: var(--accent-color);
        }
      }
    }
  }
}

.fade-slide-in {
  opacity: 0;
  transform: translateY(20px);
  animation: fadeSlideIn 0.4s ease-out forwards;
}

.fade-slide-out {
  animation: fadeSlideOut 0.3s ease-in forwards;
}

.fade-staggered {
  opacity: 0;
  transform: translateY(10px);
  animation: fadeStagger 0.4s ease-out forwards;
  animation-delay: var(--delay, 0ms);
}

@keyframes fadeSlideIn {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeSlideOut {
  to {
    opacity: 0;
    transform: translateY(-20px);
  }
}

@keyframes fadeStagger {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
